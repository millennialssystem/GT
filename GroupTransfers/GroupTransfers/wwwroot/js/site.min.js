function Init(){var n=document.getElementById("tosell");n.addEventListener("input",function(n){CalculateToSell(n)});n=document.getElementById("totransfer");n.addEventListener("input",function(n){CalculateToSell(n)})}function CalculateToSell(n){var i=new RegExp("[0-9]");let t=-1;if(i.test(n.data)||n.data=="."||n.target.value.length>0&&(n.target.value=n.target.value.replace(n.data,"")),t=n.target.value.length>0?parseFloat(n.target.value):0,t>0)n.target.id=="tosell"?document.getElementById("totransfer").value=(t+t*percenComission+fixedCommission).toFixed(2):document.getElementById("tosell").value=((t-fixedCommission)*constTosell).toFixed(2);else t=0,document.getElementById("tosell").value=0,document.getElementById("totransfer").value=0;n.data!="."&&(n.target.value=t)}function Initcurrencyprice(n,t,i,r){var e,f,o,u,s;JSON.parse(n).forEach(function(n){e=document.createElement("tr");e.id=n.prc_id;f=document.createElement("th");f.scope="row";o=document.createTextNode("("+n.prc_bank+")"+n.prc_name);f.appendChild(o);e.appendChild(f);f=document.createElement("td");o=document.createTextNode(n.prc_value);f.appendChild(o);e.appendChild(f);t.appendChild(e);(u==undefined||new Date(n.prc_update)>u)&&(u=new Date(n.prc_update));s=document.createElement("option");s.value=n.prc_value;s.innerText=n.prc_name;r.appendChild(s)});i.innerText="Ultima Actualizacion: "+u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes();transferirdivisas()}function InitcurrencyManagerPrice(n,t){JSON.parse(n).forEach(function(n){var r=document.createElement("div"),o,i,s,u,h,f,c,e,l;r.className="row p-2";r.id="rowManagerPrice"+n.prc_id;o=document.createElement("div");o.className="col-sm";i=document.createElement("input");i.id="bankManagerPrice"+n.prc_id;i.type="text";i.className="form-control";i.value=n.prc_bank;i.lastvalue=n.prc_bank;i.addEventListener("change",function(){WillUpdateCurrencyPrice(n.prc_id)});o.appendChild(i);s=document.createElement("div");s.className="col-sm";u=document.createElement("input");u.id="coinManagerPrice"+n.prc_id;u.type="text";u.className="form-control";u.value=n.prc_name;u.addEventListener("change",function(){WillUpdateCurrencyPrice(n.prc_id)});s.appendChild(u);h=document.createElement("div");h.className="col-sm";f=document.createElement("input");f.id="valueManagerPrice"+n.prc_id;f.type="text";f.className="form-control";f.value=n.prc_value;f.addEventListener("change",function(){WillUpdateCurrencyPrice(n.prc_id)});h.appendChild(f);c=document.createElement("div");c.className="col col-lg-2";e=document.createElement("button");e.id="rowManagerPrice"+n.prc_id;e.type="button";e.className="btn btn-danger";e.addEventListener("click",function(){Inactivate(n.prc_id)});l=document.createTextNode("Eliminar");e.appendChild(l);c.appendChild(e);t.appendChild(r);r.appendChild(o);r.appendChild(s);r.appendChild(h);r.appendChild(c)})}function Inactivate(n){$.ajax({type:"POST",url:"Home/InactiveCoin",data:{id:n},success:function(){document.getElementById("rowManagerPrice"+n).style.display="none"}})}function AddCoin(){$.ajax({type:"POST",url:"Home/AddCoin",data:{name:document.getElementById("coinManagerPriceNew").value,value:document.getElementById("valueManagerPriceNew").value,bank:document.getElementById("bankManagerPriceNew").value},success:function(n){var t,e,r,o,u,s,f,h,i,c;prc_id=JSON.parse(n)[0].id;t=document.createElement("div");t.className="row p-2";t.id="rowManagerPrice"+prc_id;e=document.createElement("div");e.className="col-sm";r=document.createElement("input");r.id="bankManagerPrice"+prc_id;r.type="text";r.className="form-control";r.value=document.getElementById("bankManagerPriceNew").value;e.appendChild(r);o=document.createElement("div");o.className="col-sm";u=document.createElement("input");u.id="coinManagerPrice"+prc_id;u.type="text";u.className="form-control";u.value=document.getElementById("coinManagerPriceNew").value;o.appendChild(u);s=document.createElement("div");s.className="col-sm";f=document.createElement("input");f.id="valueManagerPrice"+prc_id;f.type="text";f.className="form-control";f.value=document.getElementById("valueManagerPriceNew").value;s.appendChild(f);h=document.createElement("div");h.className="col col-lg-2";i=document.createElement("button");i.id="rowManagerPrice"+prc_id;i.type="button";i.className="btn btn-danger";i.addEventListener("click",function(){Inactivate(prc_id)});c=document.createTextNode("Eliminar");i.appendChild(c);h.appendChild(i);document.getElementById("managerPrice").appendChild(t);t.appendChild(e);t.appendChild(o);t.appendChild(s);t.appendChild(h)}})}function WillUpdateCurrencyPrice(n){UpdateCoins.indexOf(n)==-1&&UpdateCoins.push(n)}function UpdateCurrencyPrice(){UpdateCoins.forEach(function(n){$.ajax({type:"POST",url:"Home/UpdateCoins",data:{id:n,name:document.getElementById("coinManagerPrice"+n).value,value:document.getElementById("valueManagerPrice"+n).value,bank:document.getElementById("bankManagerPrice"+n).value},success:function(){}})})}function transferirdivisas(){var n=document.getElementById("typemoneda").value,t=document.getElementById("cantidadmoneda").value,i=new RegExp("[0-9]");document.getElementById("transferirdivisas").innerHTML="Bs: "+n*t}function completeRight(n,t,i){return n.length<i?completeRight(n+t,t,i):n}function completeLeft(n,t,i){return n.length<i?completeLeft(t+n,t,i):n}function login(){var n=$("#inputUser").val(),t=$("#inputPassword").val(),i="Admin/Login?usr="+n+"&pswd="+t;$.get(i,function(n){$("#menu").html(n)})}let fixedCommission=.3,percenComission=.054;const constTosell=.94876660341555985;var UpdateCoins=[];$(document).ready(function(){Init();Initcurrencyprice(document.getElementById("valuescurrencyprice").value,document.getElementById("currencypricetbody"),document.getElementById("lastupdatelable"),document.getElementById("typemoneda"));InitcurrencyManagerPrice(document.getElementById("valuescurrencyprice").value,document.getElementById("managerPrice"))});$("#btn").click(function(){login()});