function Init(){var n=document.getElementById("tosell"),t;n.addEventListener("input",function(n){CalculateToSell(n)});n=document.getElementById("totransfer");n.addEventListener("input",function(n){CalculateToSell(n)});t=document.getElementById("btnsearchpackage");t!=undefined&&t.addEventListener("click",function(){Getpackage(document.getElementById("refpackage"),document.getElementById("detailpackage"),document.getElementById("progresspackage"))})}function CalculateToSell(n){var i=new RegExp("[0-9]");let t=-1;if(i.test(n.data)||n.data=="."||n.target.value.length>0&&(n.target.value=n.target.value.replace(n.data,"")),t=n.target.value.length>0?parseFloat(n.target.value):0,t>0)n.target.id=="tosell"?document.getElementById("totransfer").value=(t+t*percenComission+fixedCommission).toFixed(2):document.getElementById("tosell").value=((t-fixedCommission)*constTosell).toFixed(2);else t=0,document.getElementById("tosell").value=0,document.getElementById("totransfer").value=0;n.data!="."&&(n.target.value=t)}function Initcurrencyprice(n,t,i,r){var e,f,o,u,s;JSON.parse(n).forEach(function(n){e=document.createElement("tr");e.id=n.prc_id;f=document.createElement("th");f.scope="row";o=document.createTextNode("("+n.prc_bank+")"+n.prc_name);f.appendChild(o);e.appendChild(f);f=document.createElement("td");o=document.createTextNode(n.prc_value);f.appendChild(o);e.appendChild(f);t.appendChild(e);(u==undefined||new Date(n.prc_update)>u)&&(u=new Date(n.prc_update));s=document.createElement("option");s.value=n.prc_value;s.innerText=n.prc_name;r.appendChild(s)});i.innerText="Ultima Actualizacion: "+u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes();transferirdivisas()}function InitcurrencyManagerPrice(n,t){JSON.parse(n).forEach(function(n){var u=document.createElement("div"),h,r,c,f,l,e,a,o,s,i,v;u.className="row p-2";u.id="rowManagerPrice"+n.prc_id;h=document.createElement("div");h.className="col-sm";r=document.createElement("input");r.id="bankManagerPrice"+n.prc_id;r.type="text";r.className="form-control";r.value=n.prc_bank;r.lastvalue=n.prc_bank;r.addEventListener("change",function(){WillUpdateCurrencyPrice(n.prc_id)});h.appendChild(r);c=document.createElement("div");c.className="col-sm";f=document.createElement("input");f.id="coinManagerPrice"+n.prc_id;f.type="text";f.className="form-control";f.value=n.prc_name;f.addEventListener("change",function(){WillUpdateCurrencyPrice(n.prc_id)});c.appendChild(f);l=document.createElement("div");l.className="col-sm";e=document.createElement("input");e.id="valueManagerPrice"+n.prc_id;e.type="text";e.className="form-control";e.value=n.prc_value;e.addEventListener("change",function(){WillUpdateCurrencyPrice(n.prc_id)});l.appendChild(e);a=document.createElement("div");a.className="col col-lg-2";o=document.createElement("ul");o.className="list-inline social-buttons";s=document.createElement("li");s.className="list-inline-item";o.appendChild(s);i=document.createElement("a");i.id="rowManagerPrice"+n.prc_id;i.className="action";i.setAttribute("data-toggle","tooltip");i.setAttribute("data-html","true");i.setAttribute("data-placement","right");i.setAttribute("title","Eliminar");i.style="height: 40px;width: 40px;line-height: 40px;background-color:#fed136;color:#fff;";i.addEventListener("click",function(){Inactivate(n.prc_id)});v=document.createElement("i");v.className="fas fa-minus";i.appendChild(v);s.appendChild(i);o.appendChild(s);a.appendChild(o);t.appendChild(u);u.appendChild(h);u.appendChild(c);u.appendChild(l);u.appendChild(a)});$('[data-toggle="tooltip"]').tooltip()}function Inactivate(n){return $.ajax({type:"POST",url:"Home/InactiveCoin",data:{id:n},success:function(){document.getElementById("rowManagerPrice"+n).style.display="none"}}),!1}function Getpackage(n,t,i){$.ajax({type:"POST",url:"Home/Getpackage",data:{reference:n.value},success:function(n){var r=JSON.parse(n);r.length>0&&(t.innerText=r[0].pck_detail,i.style.width=r[0].pck_progress+"%",i.innerText=r[0].pck_progress+"%")}})}function AddCoin(){$.ajax({type:"POST",url:"Home/AddCoin",data:{name:document.getElementById("coinManagerPriceNew").value,value:document.getElementById("valueManagerPriceNew").value,bank:document.getElementById("bankManagerPriceNew").value},success:function(n){var i,s,r,h,u,c,f,l,e,o,t,a;prc_id=JSON.parse(n)[0].id;i=document.createElement("div");i.className="row p-2";i.id="rowManagerPrice"+prc_id;s=document.createElement("div");s.className="col-sm";r=document.createElement("input");r.id="bankManagerPrice"+prc_id;r.type="text";r.className="form-control";r.value=document.getElementById("bankManagerPriceNew").value;s.appendChild(r);h=document.createElement("div");h.className="col-sm";u=document.createElement("input");u.id="coinManagerPrice"+prc_id;u.type="text";u.className="form-control";u.value=document.getElementById("coinManagerPriceNew").value;h.appendChild(u);c=document.createElement("div");c.className="col-sm";f=document.createElement("input");f.id="valueManagerPrice"+prc_id;f.type="text";f.className="form-control";f.value=document.getElementById("valueManagerPriceNew").value;c.appendChild(f);l=document.createElement("div");l.className="col col-lg-2";e=document.createElement("ul");e.className="list-inline social-buttons";o=document.createElement("li");o.className="list-inline-item";e.appendChild(o);t=document.createElement("a");t.id="rowManagerPrice"+prc_id;t.className="action";t.setAttribute("data-toggle","tooltip");t.setAttribute("data-html","true");t.setAttribute("data-placement","right");t.setAttribute("title","Eliminar");t.style="height: 40px;width: 40px;line-height: 40px;background-color:#fed136;color:#fff;";t.addEventListener("click",function(){Inactivate(prc_id)});a=document.createElement("i");a.className="fas fa-minus";t.appendChild(a);o.appendChild(t);e.appendChild(o);l.appendChild(e);document.getElementById("managerPrice").appendChild(i);i.appendChild(s);i.appendChild(h);i.appendChild(c);i.appendChild(l);$('[data-toggle="tooltip"]').tooltip()}})}function WillUpdateCurrencyPrice(n){UpdateCoins.indexOf(n)==-1&&UpdateCoins.push(n)}function UpdateCurrencyPrice(){UpdateCoins.forEach(function(n){$.ajax({type:"POST",url:"Home/UpdateCoins",data:{id:n,name:document.getElementById("coinManagerPrice"+n).value,value:document.getElementById("valueManagerPrice"+n).value,bank:document.getElementById("bankManagerPrice"+n).value},success:function(){}})})}function transferirdivisas(){var n=document.getElementById("typemoneda").value,t=document.getElementById("cantidadmoneda").value,i=new RegExp("[0-9]");document.getElementById("transferirdivisas").innerHTML="Bs: "+n*t}function completeRight(n,t,i){return n.length<i?completeRight(n+t,t,i):n}function completeLeft(n,t,i){return n.length<i?completeLeft(t+n,t,i):n}let fixedCommission=.3,percenComission=.054;const constTosell=.94876660341555985;var UpdateCoins=[];$(function(){$('[data-toggle="tooltip"]').tooltip()});$(document).ready(function(){Init();document.getElementById("valuescurrencyprice")!=undefined&&Initcurrencyprice(document.getElementById("valuescurrencyprice").value,document.getElementById("currencypricetbody"),document.getElementById("lastupdatelable"),document.getElementById("typemoneda"));document.getElementById("managerPrice")!=undefined&&InitcurrencyManagerPrice(document.getElementById("valuescurrencyprice").value,document.getElementById("managerPrice"))});