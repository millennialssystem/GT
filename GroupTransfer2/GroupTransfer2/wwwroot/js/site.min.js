var utils={getDateGT:function(n,t){var i;switch(t){case"yyyy-mm-dd":return i=new Date(n),utils.completeLeft(i.getDate().toString(),"0",2)+"/"+utils.completeLeft((i.getMonth()+1).toString(),"0",2)+"/"+i.getFullYear();default:return i=new Date(n),i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()+" "+i.getHours()+":"+i.getMinutes()}},mensajecorecto:function(n,t){$("#"+n).html("<div class='alert alert-success'>");$("#"+n+"> .alert-success").html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("<\/button>");$("#"+n+"> .alert-success").append("<strong>"+t+"<\/strong>");$("#"+n+"> .alert-success").append("<\/div>")},mensajeIncorecto:function(n,t){$("#"+n).html("<div class='alert alert-danger'>");$("#"+n+"> .alert-danger").html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("<\/button>");$("#"+n+"> .alert-danger").append("<strong>"+t+"<\/strong>");$("#"+n+"> .alert-danger").append("<\/div>")},completeRight:function(n,t,i){return n.length<i?this.completeRight(n+t,t,i):n},completeLeft:function(n,t,i){return n.length<i?this.completeLeft(t+n,t,i):n}},currencyprice={fixedCommission:.3,percenComission:.054,constTosell:.94876660341555985,UpdateCoins:[],Init:function(){var n=document.getElementById("tosell");n!=undefined&&n.addEventListener("input",function(n){currencyprice.CalculateToSell(n)});n=document.getElementById("totransfer");n!=undefined&&n.addEventListener("input",function(n){currencyprice.CalculateToSell(n)});document.getElementById("currencypricetbody")!=undefined&&this.Initcurrencyprice(document.getElementById("valuescurrencyprice").value,document.getElementById("currencypricetbody"),document.getElementById("lastupdatelable"),document.getElementById("typemoneda"),document.getElementById("typemonedato"));document.getElementById("managerPrice")!=undefined&&this.InitcurrencyManagerPrice(document.getElementById("valuescurrencyprice").value,document.getElementById("managerPrice"))},AddCoin:function(){$.ajax({type:"Get",url:"Admin/AddCoin",data:{name:document.getElementById("coinManagerPriceNew").value,value:document.getElementById("valueManagerPriceNew").value,bank:document.getElementById("bankManagerPriceNew").value},success:function(n){var i,s,r,h,u,c,f,l,e,o,t,a;prc_id=JSON.parse(n)[0].id;i=document.createElement("div");i.className="row p-2";i.id="rowManagerPrice"+prc_id;s=document.createElement("div");s.className="col-sm";r=document.createElement("input");r.id="bankManagerPrice"+prc_id;r.type="text";r.className="form-control";r.value=document.getElementById("bankManagerPriceNew").value;s.appendChild(r);h=document.createElement("div");h.className="col-sm";u=document.createElement("input");u.id="coinManagerPrice"+prc_id;u.type="text";u.className="form-control";u.value=document.getElementById("coinManagerPriceNew").value;h.appendChild(u);c=document.createElement("div");c.className="col-sm";f=document.createElement("input");f.id="valueManagerPrice"+prc_id;f.type="text";f.className="form-control";f.value=document.getElementById("valueManagerPriceNew").value;c.appendChild(f);l=document.createElement("div");l.className="col col-lg-2 text-center";e=document.createElement("ul");e.className="list-inline social-buttons";o=document.createElement("li");o.className="list-inline-item";e.appendChild(o);t=document.createElement("a");t.id="rowManagerPrice"+prc_id;t.className="action";t.setAttribute("data-toggle","tooltip");t.setAttribute("data-html","true");t.setAttribute("data-placement","right");t.setAttribute("title","Eliminar");t.style="height: 40px;width: 40px;line-height: 40px;background-color:#d60f22;color:#fff;";t.addEventListener("click",function(){Inactivate(prc_id)});a=document.createElement("i");a.className="fas fa-minus";t.appendChild(a);o.appendChild(t);e.appendChild(o);l.appendChild(e);document.getElementById("managerPrice").appendChild(i);i.appendChild(s);i.appendChild(h);i.appendChild(c);i.appendChild(l);$('[data-toggle="tooltip"]').tooltip()}})},CalculateToSell:function(n){var i=new RegExp("[0-9]");let t=-1;if(i.test(n.data)||n.data=="."||n.target.value.length>0&&(n.target.value=n.target.value.replace(n.data,"")),t=n.target.value.length>0?parseFloat(n.target.value):0,t>0)n.target.id=="tosell"?document.getElementById("totransfer").value=(t+t*this.percenComission+this.fixedCommission).toFixed(2):document.getElementById("tosell").value=((t-this.fixedCommission)*this.constTosell).toFixed(2);else t=0,document.getElementById("tosell").value=0,document.getElementById("totransfer").value=0;n.data!="."&&(n.target.value=t)},WillUpdateCurrencyPrice:function(n){this.UpdateCoins.indexOf(n)==-1&&this.UpdateCoins.push(n)},UpdateCurrencyPrice:function(){this.UpdateCoins.forEach(function(n){$.ajax({type:"Get",url:"Admin/UpdateCoins",data:{id:n,name:document.getElementById("coinManagerPrice"+n).value,value:document.getElementById("valueManagerPrice"+n).value,bank:document.getElementById("bankManagerPrice"+n).value},success:function(){}})})},Inactivate:function(n){return $.ajax({type:"Get",url:"Admin/InactiveCoin",data:{id:n},success:function(){document.getElementById("rowManagerPrice"+n).style.display="none"}}),!1},transferirdivisas:function(){var n=document.getElementById("typemoneda").value,t=document.getElementById("typemonedato").value,r=document.getElementById("cantidadmoneda").value,i;n!="0"&&t!="0"&&(i=r/n,document.getElementById("transferirdivisas").innerHTML="<strong>Total: <\/strong>"+i*t)},Initcurrencyprice:function(n,t,i,r,u){var o,e,s,f,h,c;JSON.parse(n).forEach(function(n){o=document.createElement("tr");o.id=n.prc_id;e=document.createElement("th");e.scope="row";s=document.createTextNode("("+n.prc_bank+")"+n.prc_name);e.appendChild(s);o.appendChild(e);e=document.createElement("td");s=document.createTextNode(n.prc_value);e.appendChild(s);o.appendChild(e);t.appendChild(o);(f==undefined||new Date(n.prc_update)>f)&&(f=new Date(n.prc_update));h=document.createElement("option");h.value=n.prc_value;h.innerText=n.prc_name;r.appendChild(h);c=document.createElement("option");c.value=n.prc_value;c.innerText=n.prc_name;u.appendChild(c)});i.innerText="Ultima Actualizacion: "+f.getDate()+"/"+(f.getMonth()+1)+"/"+f.getFullYear()+" "+f.getHours()+":"+f.getMinutes();this.transferirdivisas()},InitcurrencyManagerPrice:function(n,t){JSON.parse(n).forEach(function(n){var u=document.createElement("div"),h,r,c,f,l,e,a,o,s,i,v;u.className="row p-2";u.id="rowManagerPrice"+n.prc_id;h=document.createElement("div");h.className="col-sm";r=document.createElement("input");r.id="bankManagerPrice"+n.prc_id;r.type="text";r.className="form-control";r.value=n.prc_bank;r.lastvalue=n.prc_bank;r.addEventListener("change",function(){currencyprice.WillUpdateCurrencyPrice(n.prc_id)});h.appendChild(r);c=document.createElement("div");c.className="col-sm";f=document.createElement("input");f.id="coinManagerPrice"+n.prc_id;f.type="text";f.className="form-control";f.value=n.prc_name;f.addEventListener("change",function(){currencyprice.WillUpdateCurrencyPrice(n.prc_id)});c.appendChild(f);l=document.createElement("div");l.className="col-sm";e=document.createElement("input");e.id="valueManagerPrice"+n.prc_id;e.type="text";e.className="form-control";e.value=n.prc_value;e.addEventListener("change",function(){currencyprice.WillUpdateCurrencyPrice(n.prc_id)});l.appendChild(e);a=document.createElement("div");a.className="col col-lg-2 text-center";o=document.createElement("ul");o.className="list-inline social-buttons";s=document.createElement("li");s.className="list-inline-item";o.appendChild(s);i=document.createElement("a");i.id="rowManagerPrice"+n.prc_id;i.className="action";i.setAttribute("data-toggle","tooltip");i.setAttribute("data-html","true");i.setAttribute("data-placement","right");i.setAttribute("title","Eliminar");i.style="height: 40px;width: 40px;line-height: 40px;background-color:#d60f22;color:#fff;";i.addEventListener("click",function(){currencyprice.Inactivate(n.prc_id)});v=document.createElement("i");v.className="fas fa-minus";i.appendChild(v);s.appendChild(i);o.appendChild(s);a.appendChild(o);t.appendChild(u);u.appendChild(h);u.appendChild(c);u.appendChild(l);u.appendChild(a)});$('[data-toggle="tooltip"]').tooltip()}},package={printpackagevalues:null,Init:function(){var t=document.getElementById("btnsearchpackage"),n,i;t!=undefined&&t.addEventListener("click",function(){package.Getpackage(document.getElementById("refpackage"),document.getElementById("detailpackage"),document.getElementById("progresspackage"),document.getElementById("MostrarOcultarPackageDetail"))});n=document.getElementById("btnprintpackage");n!=undefined&&n.addEventListener("click",function(){package.printpackage($("#refpackageprint").text(),package.printpackagevalues)});i=document.getElementById("managerpackage");i!=undefined&&(document.getElementById("btnphonecustomer").addEventListener("click",function(){package.addphonesdiv("customerphone",document.getElementById("inputphonecustomer").value)}),document.getElementById("btnphonebeneficiary").addEventListener("click",function(){package.addphonesdiv("beneficiaryphone",document.getElementById("inputphonebeneficiary").value)}),$("#formmanagerpackage input,#formmanagerpackage textarea").jqBootstrapValidation({preventSubmit:!0,submitError:function(){},submitSuccess:function(n,t){t.preventDefault();package.AddPackage(n,t)},filter:function(){return $(this).is(":visible")}}),document.getElementById("addcontainerpackage").addEventListener("click",function(n){package.containerpackagechange(n)}),document.getElementById("editcontainerpackage").addEventListener("click",function(n){package.containerpackagechange(n)}),document.getElementById("codegtackinput").addEventListener("input",function(){package.Editpackage($("input#codegtackinput").val())}))},printpackage:function(n,t){var i=document.getElementById("el_iframe").contentWindow.document,r,u;i.getElementById("datepackageprint").innerText=utils.getDateGT(t.Pck_Date,"yyyy-mm-dd");i.getElementById("refpackageprint").innerText=n;i.getElementById("namecustomerprint").innerText=t.Pck_NameCustomer;i.getElementById("identificationcustomerprint").innerText=t.Pck_IdCustomer;i.getElementById("lastnamecustomerprint").innerText=t.Pck_LastNameCustomer;i.getElementById("agecustomerprint").innerText=t.Pck_AgeCustomer;r=t.Pck_PhoneCustomer.split(";");i.getElementById("customerphone1print").innerText=r[0];i.getElementById("customerphone2print").innerText=r[1];i.getElementById("customerphone3print").innerText=r[2];i.getElementById("directioncustomerprint").innerText=t.Pck_AddressCustomer;i.getElementById("emailcustomerprint").innerText=t.Pck_EmailCustomer;i.getElementById("namelastnamebeneficiaryprint").innerText=t.Pck_NameLastnamebeneficiary;u=t.Pck_Phonebeneficiary.split(";");i.getElementById("beneficiaryphone1print").innerText=u[0];i.getElementById("beneficiaryphone2print").innerText=u[1];i.getElementById("beneficiaryphone3print").innerText=u[2];i.getElementById("deliverybeneficiaryprint").innerText=t.Pck_Addressbeneficiary;i.getElementById("nemaecollectorprint").innerText=t.Pck_NameCollector;i.getElementById("idcollectorprint").innerText=t.Pck_IdCollector;i.getElementById("detailarticlesprint").innerText=t.Pck_detailArticles;i.getElementById("pricebykgprint").innerText=t.Pck_PriceByKg;i.getElementById("kginsuitcaseprint").innerText=t.Pck_KgInSuitCase;i.getElementById("detailpackagecoinprint").innerText=t.Pck_Coin;i.getElementById("detailexchangerateprint").innerText=t.Pck_TypeChange;i.getElementById("detailpaytotalprint").innerText=t.Pck_TotalPrice;i.getElementById("detailpackagedateprint").innerText=utils.getDateGT(t.Pck_Date,"yyyy-mm-dd");i.getElementById("namelastnamecustomerprint").innerText=t.Pck_NameCustomer+" "+t.Pck_LastNameCustomer;i.getElementById("identificationcustomerdeclareprint").innerText=t.Pck_IdCustomer;document.getElementById("el_iframe").contentWindow.print()},clearManager:function(){$("textarea#insendpackagedetal").val("");$("input#insendprogress").val("");$("input#inidentificationcustomer").val("");$("input#innamecustomer").val("");$("input#inlastnamecustomer").val("");$("input#inagecustomer").val("");document.getElementById("customerphone1").innerHTML="";document.getElementById("customerphone2").innerHTML="";document.getElementById("customerphone3").innerHTML="";$("input#indirectioncustomer").val("");$("input#inemailcustomer").val("");$("input#innamelastnamebeneficiary").val("");document.getElementById("beneficiaryphone1").innerHTML="";document.getElementById("beneficiaryphone2").innerHTML="";document.getElementById("beneficiaryphone3").innerHTML="";$("input#indeliverybeneficiary").val("");$("input#innamecollector").val("");$("input#inidcollector").val("");$("input#inpricebykg").val("");$("input#inkginsuitcase").val("");$("input#indetailpackagecoin").val("");$("input#indetailexchangerate").val("");$("input#indetailpaytotal").val("");$("textarea#detailarticlessend").val("")},Getpackage:function(n,t,i){$.ajax({type:"POST",url:"Home/Getpackage",data:{reference:n.value},success:function(r){var u=JSON.parse(r)[0],f,e;u!=undefined?(package.printpackagevalues=u,t.innerText=u.Pck_detailSend,i.style.width=u.pck_progress+"%",i.innerText=u.pck_progress+"%",$("#datepackageprint").text(utils.getDateGT(u.Pck_Date,"yyyy-mm-dd")),$("#refpackageprint").text(n.value),$("#namecustomerprint").text(u.Pck_NameCustomer),$("#identificationcustomerprint").text(u.Pck_IdCustomer),$("#lastnamecustomerprint").text(u.Pck_LastNameCustomer),$("#agecustomerprint").text(u.Pck_AgeCustomer),f=u.Pck_PhoneCustomer.split(";"),$("#customerphone1print").text(f[0]),$("#customerphone2print").text(f[1]),$("#customerphone3print").text(f[2]),$("#directioncustomerprint").text(u.Pck_AddressCustomer),$("#emailcustomerprint").text(u.Pck_EmailCustomer),$("#namelastnamebeneficiaryprint").text(u.Pck_NameLastnamebeneficiary),e=u.Pck_Phonebeneficiary.split(";"),$("#beneficiaryphone1print").text(e[0]),$("#beneficiaryphone2print").text(e[1]),$("#beneficiaryphone3print").text(e[2]),$("#deliverybeneficiaryprint").text(u.Pck_Addressbeneficiary),$("#nemaecollectorprint").text(u.Pck_NameCollector),$("#idcollectorprint").text(u.Pck_IdCollector),$("#detailarticlesprint").text(u.Pck_detailArticles),$("#pricebykgprint").text(u.Pck_PriceByKg),$("#kginsuitcaseprint").text(u.Pck_KgInSuitCase),$("#detailpackagecoinprint").text(u.Pck_Coin),$("#detailexchangerateprint").text(u.Pck_TypeChange),$("#detailpaytotalprint").text(u.Pck_TotalPrice),$("#detailpackagedateprint").text(utils.getDateGT(u.Pck_Date,"yyyy-mm-dd")),$("#namelastnamecustomerprint").text(u.Pck_NameCustomer+" "+u.Pck_LastNameCustomer),$("#identificationcustomerdeclareprint").text(u.Pck_IdCustomer),$("#Getpackagessend").addClass("show"),$("#Getpackagesdeclaration").addClass("show"),$("#mensagepackage").removeClass("show")):($("#Getpackagessend").removeClass("show"),$("#Getpackagesdeclaration").removeClass("show"),utils.mensajeIncorecto("mensagepackage","Referencia no encontrada"),$("#mensagepackage").addClass("show"))}})},Editpackage:function(n){$.ajax({type:"Get",url:"Admin/Getpackage",data:{reference:n},success:function(n){var t,i,r;package.clearManager();t=JSON.parse(n)[0];t!=undefined&&($("textarea#insendpackagedetal").val(t.Pck_detailSend),$("input#insendprogress").val(t.pck_progress),$("input#inidentificationcustomer").val(t.Pck_IdCustomer),$("input#innamecustomer").val(t.Pck_NameCustomer),$("input#inlastnamecustomer").val(t.Pck_LastNameCustomer),$("input#inagecustomer").val(t.Pck_AgeCustomer),i=t.Pck_PhoneCustomer.split(";"),package.addphonesdiv("customerphone",i[0]),package.addphonesdiv("customerphone",i[1]),package.addphonesdiv("customerphone",i[2]),$("input#indirectioncustomer").val(t.Pck_AddressCustomer),$("input#inemailcustomer").val(t.Pck_EmailCustomer),$("input#innamelastnamebeneficiary").val(t.Pck_NameLastnamebeneficiary),r=t.Pck_Phonebeneficiary.split(";"),package.addphonesdiv("beneficiaryphone",r[0]),package.addphonesdiv("beneficiaryphone",r[1]),package.addphonesdiv("beneficiaryphone",r[2]),$("input#indeliverybeneficiary").val(t.Pck_Addressbeneficiary),$("input#innamecollector").val(t.Pck_NameCollector),$("input#inidcollector").val(t.Pck_IdCollector),$("input#inpricebykg").val(t.Pck_PriceByKg),$("input#inkginsuitcase").val(t.Pck_KgInSuitCase),$("input#indetailpackagecoin").val(t.Pck_Coin),$("input#indetailexchangerate").val(t.Pck_TypeChange),$("input#indetailpaytotal").val(t.Pck_TotalPrice),$("textarea#detailarticlessend").val(t.Pck_detailArticles))}})},AddPackage:function(){for(var t={Pck_id:1,Pck_ref:$("input#codegtackinput").val(),Pck_detailSend:$("textarea#insendpackagedetal").val(),Pck_progress:$("input#insendprogress").val(),Pck_IdCustomer:$("input#inidentificationcustomer").val(),Pck_NameCustomer:$("input#innamecustomer").val(),Pck_LastNameCustomer:$("input#inlastnamecustomer").val(),Pck_AgeCustomer:$("input#inagecustomer").val(),Pck_PhoneCustomer:["","",""],Pck_AddressCustomer:$("input#indirectioncustomer").val(),Pck_EmailCustomer:$("input#inemailcustomer").val(),Pck_NameLastnamebeneficiary:$("input#innamelastnamebeneficiary").val(),Pck_Phonebeneficiary:["","",""],Pck_Addressbeneficiary:$("input#indeliverybeneficiary").val(),Pck_NameCollector:$("input#innamecollector").val(),Pck_IdCollector:$("input#inidcollector").val(),Pck_PriceByKg:$("input#inpricebykg").val(),Pck_KgInSuitCase:$("input#inkginsuitcase").val(),Pck_Coin:$("input#indetailpackagecoin").val(),Pck_TypeChange:$("input#indetailexchangerate").val(),Pck_TotalPrice:$("input#indetailpaytotal").val(),Pck_Date:new Date,Pck_detailArticles:$("textarea#detailarticlessend").val()},n=1;n<4;n++)document.getElementById("customerphone"+n).children.length>0&&(t.Pck_PhoneCustomer[n-1]=document.getElementById("customerphone"+n).children[0].children[1].innerText);for(n=1;n<4;n++)document.getElementById("beneficiaryphone"+n).children.length>0&&(t.Pck_Phonebeneficiary[n-1]=document.getElementById("beneficiaryphone"+n).children[0].children[1].innerText);$.ajax({type:"Post",url:"Admin/Setpackage",data:{package:t},success:function(){utils.mensajecorecto("mensagemanagerpackage","Informacion agregada correctamente")}})},addphonesdiv:function(n,t){if(t.length!=0){var i,r;const u=4;for(r=1;r<u;r++)i=n+r,document.getElementById(i).children.length==0&&($("#"+i).html("<div class='alert alert-dark'>"),$("#"+i+"> .alert-dark").html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("<\/button>"),$("#"+i+"> .alert-dark").append("<strong>"+t+"<\/strong>"),$("#"+i+"> .alert-dark").append("<\/div>"),r=u)}},containerpackagechange:function(n){var t=document.getElementById("codegtackinput");switch(n.currentTarget.id){case"addcontainerpackage":t.value="";package.clearManager();t.disabled=!0;break;case"editcontainerpackage":t.disabled=!1}}},question={Init:function(){var n=document.getElementById("managerQuestionmensajes");n!=undefined&&this.InitcurrencyManagerQuestionmensajes(n)},InitcurrencyManagerQuestionmensajes:function(n){$.ajax({type:"Get",url:"Admin/GetMensagges",success:function(t){JSON.parse(t).forEach(function(t){var i=document.createElement("div"),f,l,e,a,o,v,s,y,u,h,p,c,r,w;i.className="row p-2 text-center";i.id="rowManagerPackagedetail"+t.men_id;f=document.createElement("div");f.className="col-sm";f.id="divNombreManagerPackagemensaje"+t.men_id;l=document.createElement("label");l.id="nombreManagerPackagemensaje"+t.men_id;l.innerHTML="<strong>Nombre:<\/strong> "+t.men_name;e=document.createElement("div");e.className="col-sm";e.id="divTelefonoManagerPackagemensaje"+t.men_id;a=document.createElement("label");a.id="TelefonoManagerPackagemensaje"+t.men_id;a.innerHTML="<strong>Teléfono:<\/strong> "+t.men_phone;o=document.createElement("div");o.className="col-sm";o.id="divEmailManagerPackagemensaje"+t.men_id;v=document.createElement("label");v.id="EmailManagerPackagemensaje"+t.men_id;v.innerHTML="<strong>Email:<\/strong> "+t.men_email;s=document.createElement("div");s.className="col-sm";s.id="divfechaManagerPackagemensaje"+t.men_id;y=document.createElement("label");y.id="fechaManagerPackagemensaje"+t.men_id;y.innerHTML="<strong>Fecha:<\/strong> "+utils.getDateGT(t.men_date);n.appendChild(i);i.appendChild(f);f.appendChild(l);i.appendChild(e);e.appendChild(a);i.appendChild(o);o.appendChild(v);i.appendChild(s);s.appendChild(y);u=document.createElement("div");u.className="row";u.id="rowManagerPackagemensaje"+t.men_id;h=document.createElement("div");h.className="col-sm border border-primary rounded";h.id="divManagerPackagemensaje"+t.men_id;p=document.createElement("label");p.id="labelManagerPackagemensaje"+t.men_id;p.innerHTML=t.men_menssage;c=document.createElement("div");c.className="col col-lg-1 text-center";c.id="divatenderManagerPackagemensaje"+t.men_id;r=document.createElement("button");r.className="btn btn-success";r.id="atenderManagerPackagemensaje"+t.men_id;r.title="Atender";r.innerHTML='<span aria-hidden="true">&checkmark;<\/span>';r.addEventListener("click",function(){question.atent(t.men_id)});n.appendChild(u);u.appendChild(h);h.appendChild(p);u.appendChild(c);c.appendChild(r);w=document.createElement("hr");n.appendChild(w)})}})},atent:function(n){$.ajax({type:"Get",url:"Admin/Attent",data:{id:n},success:function(){document.getElementById("rowManagerPackagedetail"+n).style.display="none";document.getElementById("rowManagerPackagemensaje"+n).style.display="none";utils.mensajecorecto("mensagemanagerquestion","Mensaje atendido")}})}},site;$(function(){$('[data-toggle="tooltip"]').tooltip()});$(document).ready(function(){currencyprice.Init();package.Init();question.Init()});site={hideAlerts:function(){setTimeout(function(){$(".alert").alert("close")},1500)},hideModals:function(n){$(n).modal("hide")},toolTips:function(){$('[data-toggle="tooltip"]').tooltip()},disabledElement:function(n){$(n).addClass("disabled");$(n).attr("disabled")},showModal:function(n){$(n).modal("show")}};